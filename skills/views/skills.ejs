<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Skills</title>
    <link rel='stylesheet' href='../public/css/style.css' />
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
    <script type="module" src="/public/js/main.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/fontawesome/6.0.0-beta3/css/all.min.css">
    <style>
      .hexagon {
  fill: none; /* Fondo transparente */
  stroke: blue; /* Borde azul */
  stroke-width: 2; /* Ancho del borde */
}
#skills-container {
  display: flex;
  flex-wrap: wrap; /* Permite que los elementos pasen a la siguiente fila si no caben */
  gap: 10px; /* Espacio entre hexágonos */
  justify-content: center; /* Centra los elementos horizontalmente */
}
.svg-wrapper {
  flex: 0 0 125px; /* Cada hexágono ocupa un ancho fijo */
  position: relative;
 }
 .svg-wrapper:hover {
  transform: scale(1.2);
}
.svg-wrapper:hover .icon-wrapper {
  display: block; /* Mostrar los íconos cuando se pasa el cursor sobre .svg-wrapper */
}
#skill-description {
  margin-top: 20px;
  padding: 10px;
  border: 2px solid yellow;
  text-align: center;
}
.icon-wrapper {
  position: absolute;
  cursor: pointer;
  display: none;
}

  </style>
</head>
<body>
  <h1>Skills</h1>
  <a href="/" class="btn btn-danger">Cerrar sesión</a>

  <br> <br>
  <div class="align-self-center">
    <a href="/leaderboard" class="btn btn-warning">Consulta los puntos para cada medalla</a>
  </div>

  <div id="skills-container">
    <% competencias.forEach(skill => { %>
      <div class="svg-wrapper" data-id="<%= skill.id %>" data-description="<%= skill.description %>" data-custom="false">
          <svg width="100" height="100" viewBox="0 0 100 100">
              <!-- Hexágono -->
              <polygon points="50,5 95,27.5 95,72.5 50,95 5,72.5 5,27.5" class="hexagon"></polygon>
              
              <!-- Texto de la habilidad -->
              <text x="50%" y="20%" text-anchor="middle" fill="black">
                <% if (skill.textLines) { %>
                  <% skill.textLines.forEach((line, index) => { %>
                    <tspan x="50%" dy="<%= index === 0 ? '1.2em' : '1.4em' %>" font-size="8px">
                      <%= line %>
                    </tspan>
                  <% }); %>
                <% } else { %>
                  <tspan x="50%" dy="1.2em" font-weight="bold">Sin texto</tspan>
                <% } %>
              </text>
    
              <!-- Imagen de la habilidad -->
              <image x="35%" y="60%" width="30" height="30" href="<%= skill.icon %>"></image>
              <image x="75%" y="80%" width="20" height="20" href="/assets/editar.png" class="icon-wrapper"></image>
              <image x="10%" y="80%" width="20" height="20" href="/assets/libro.png" class="icon-wrapper" data-id="<%= skill.id %>" ></image>
            </svg>
            <div class="icon-wrapper" style="display: none;">
            </div>
          </div>
          <% }); %>
        </div>
        
 

  <!-- Contenedor de descripción -->
  <div id="skill-description" class="yellow-border">
    <p id="skill-description-text"></p>

  </div>



  <script>
    document.addEventListener('DOMContentLoaded', () => {
      const icons = document.querySelectorAll('.icon-wrapper');
      
      const skills = document.querySelectorAll('.svg-wrapper');
      const descriptionContainer = document.getElementById('skill-description');
      const descriptionText = document.getElementById('skill-description-text');

      icons.forEach(icon => {
        icon.addEventListener('click', () => {
          const skillId = icon.getAttribute('data-id');
          if (skillId) {
            window.location.href = `/skills/${skillId}`;
          }
        });
      });
      if (descriptionContainer && descriptionText && skills.length > 0) {
      skills.forEach(skill => {
        skill.addEventListener('mouseover', () => {
          // Obtiene la descripción del skill
          const description = skill.getAttribute('data-description');
          
          // Muestra la descripción
          descriptionText.textContent = description;
          descriptionContainer.style.display = 'block'; // Muestra el contenedor
        });

        skill.addEventListener('mouseout', () => {
          // Oculta la descripción cuando el ratón se mueve fuera
          descriptionContainer.style.display = 'none'; // Oculta el contenedor
        });
      });
    } else {
      console.error('No se pudieron encontrar los elementos necesarios');
    }

    });
  </script>
        

</body>
</html>